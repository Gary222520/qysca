// use qysca
// db.dropDatabase()
// use qysca
// 切换数据库后执行
use qysca
db.createCollection('meta')

db.project_info.drop()
db.createCollection('project_info')
db.project_info.createIndex({name: 1}, {unique: true})

db.project_version_info.drop()
db.createCollection('project_version_info')
db.project_version_info.createIndex({name: 1, version: -1}, {unique: true})

db.project_dependency_tree.drop()
db.createCollection('project_dependency_tree')
db.project_dependency_tree.createIndex({name: 1, version: -1}, {unique: true})

db.project_dependency_table.drop()
db.createCollection('project_dependency_table')
db.project_dependency_table.createIndex({projectName: 1, projectVersion: -1})
db.project_dependency_table.createIndex({groupId: 1, artifactId: 1, version: -1})

db.java_component_open_detail.drop()
db.createCollection('java_component_open_detail')
db.java_component_open_detail.createIndex({groupId: 1, artifactId: 1, version: -1}, {unique: true})

db.java_component_close_detail.drop()
db.createCollection('java_component_close_detail')
db.java_component_close_detail.createIndex({groupId: 1, artifactId: 1, version: -1}, {unique: true})

db.java_component_open_dependency_tree.drop()
db.createCollection('java_component_open_dependency_tree')
db.java_component_open_dependency_tree.createIndex({groupId: 1, artifactId: 1, version: -1}, {unique: true})

db.java_component_open_dependency_table.drop()
db.createCollection('java_component_open_dependency_table')
db.java_component_open_dependency_table.createIndex({parentGroupId:1, parentArtifactId: 1, parentVersion: -1})
db.java_component_open_dependency_table.createIndex({groupId: 1, artifactId: 1, version: -1})

db.java_component_close_dependency_tree.drop()
db.createCollection('java_component_close_dependency_tree')
db.java_component_close_dependency_tree.createIndex({groupId: 1, artifactId: 1, version: -1}, {unique: true})

db.java_component_close_dependency_table.drop()
db.createCollection('java_component_close_dependency_table')
db.java_component_close_dependency_table.createIndex({parentGroupId: 1, parentArtifactId: 1, parentVersion: -1})
db.java_component_close_dependency_table.createIndex({groupId: 1, artifactId: 1, version: -1})